"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[74],{49074:(e,t,a)=>{a.r(t),a.d(t,{default:()=>A});var s=a(65043),r=a(15244),o=a(77466),n=a(66734),c=a(70579);const i=(0,n.A)([(0,c.jsx)("path",{d:"M19 7c0-1.1-.9-2-2-2h-3v2h3v2.65L13.52 14H10V9H6c-2.21 0-4 1.79-4 4v3h2c0 1.66 1.34 3 3 3s3-1.34 3-3h4.48L19 10.35zM7 17c-.55 0-1-.45-1-1h2c0 .55-.45 1-1 1"},"0"),(0,c.jsx)("path",{d:"M5 6h5v2H5zm14 7c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3m0 4c-.55 0-1-.45-1-1s.45-1 1-1 1 .45 1 1-.45 1-1 1"},"1")],"DeliveryDining"),l=(0,n.A)([(0,c.jsx)("path",{d:"M19 7c0-1.1-.9-2-2-2h-3v2h3v2.65L13.52 14H10V9H6c-2.21 0-4 1.79-4 4v3h2c0 1.66 1.34 3 3 3s3-1.34 3-3h4.48L19 10.35zM4 14v-1c0-1.1.9-2 2-2h2v3zm3 3c-.55 0-1-.45-1-1h2c0 .55-.45 1-1 1"},"0"),(0,c.jsx)("path",{d:"M5 6h5v2H5zm14 7c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3m0 4c-.55 0-1-.45-1-1s.45-1 1-1 1 .45 1 1-.45 1-1 1"},"1")],"DeliveryDiningOutlined"),d=(0,n.A)((0,c.jsx)("path",{d:"m8.1 13.34 2.83-2.83L3.91 3.5c-1.56 1.56-1.56 4.09 0 5.66zm6.78-1.81c1.53.71 3.68.21 5.27-1.38 1.91-1.91 2.28-4.65.81-6.12-1.46-1.46-4.2-1.1-6.12.81-1.59 1.59-2.09 3.74-1.38 5.27L3.7 19.87l1.41 1.41L12 14.41l6.88 6.88 1.41-1.41L13.41 13z"}),"RestaurantMenu"),u=(0,n.A)((0,c.jsx)("path",{d:"m8.1 13.34 2.83-2.83L3.91 3.5c-1.56 1.56-1.56 4.09 0 5.66zm6.78-1.81c1.53.71 3.68.21 5.27-1.38 1.91-1.91 2.28-4.65.81-6.12-1.46-1.46-4.2-1.1-6.12.81-1.59 1.59-2.09 3.74-1.38 5.27L3.7 19.87l1.41 1.41L12 14.41l6.88 6.88 1.41-1.41L13.41 13z"}),"RestaurantMenuOutlined");var h=a(83910),m=a(97929),x=a(91036),g=(a(92342),a(20737)),b=a(73216),y=a(60587);const v="data:image/png;base64,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",f=e=>{let t,a,{status:s}=e;switch(s){case"open":t="green",a="\u0645\u0641\u062a\u0648\u062d";break;case"busy":t="orange",a="\u0645\u0634\u063a\u0648\u0644";break;case"closed":t="red",a="\u0645\u063a\u0644\u0642";break;default:t="gray",a="Unknown"}const r={backgroundColor:t,color:"#fff",padding:"6px 12px",borderRadius:"6px",textTransform:"uppercase",fontWeight:"bold",fontSize:"14px"};return(0,c.jsx)("div",{style:r,children:(0,c.jsx)("span",{style:{color:"#fff",fontWeight:"bold"},children:a})})};function A(e){let{product:t}=e;const{picture:a,status:n,restaurantName:A,_id:p,location:w,availableOptions:j}=t,[N,S]=(0,s.useState)(!1),[k,C]=(0,s.useState)(!1),[R,L]=(0,s.useState)(!1),[z,O]=(0,s.useState)(!1),V=localStorage.getItem("id"),P=(0,b.Zp)(),q=(0,s.useCallback)((async()=>{try{const e=(await g.A.get("/favorites/".concat(V))).data.map((e=>e.restaurantName));S(e.includes(A))}catch(e){console.error("Error fetching favorites:",e)}}),[A,V]),F=(0,s.useCallback)((async()=>{try{const e=await g.A.get("/coupon/coupons"),t=e.data.some((e=>e.restaurant._id===p));O(t)}catch(e){console.error("Error fetching coupons:",e)}}),[p]);(0,s.useEffect)((()=>{q(),F()}),[q,F]);const E=()=>{P("/categories/".concat(A),{state:{resName:A}})},M=()=>{P("/update-opening-hours/".concat(A),{state:{resName:A}})},B=()=>{P("/edit/".concat(A),{state:{resName:A}})},D=async e=>{try{x.oR.info("Setting Status To ".concat(e)),setTimeout((async()=>{await g.A.put("/change-restaurant-status/".concat(A,"/").concat(e)),x.oR.success("Status Set To ".concat(e," Successfully")),window.location.reload()}),2e3)}catch(t){console.error("Error Setting Status To ".concat(e," "),t),x.oR.error("Failed to set status to ".concat(e))}},T="true"===localStorage.getItem("isAdmin"),X="true"===localStorage.getItem("isOwner"),J="true"===localStorage.getItem("isClient");return(0,c.jsx)("div",{className:"relative flex bg-white rounded-xl items-center justify-center shadow-lg mt-4",children:(0,c.jsxs)("div",{className:"max-w-md",children:[(0,c.jsxs)("div",{className:"grid",children:[(0,c.jsx)("img",{onClick:E,loading:"lazy",className:"object-cover w-screen md:h-40 h-30 hover:cursor-pointer",src:a,alt:A}),J&&(0,c.jsx)(c.Fragment,{children:(0,c.jsx)("div",{className:"absolute top-2 right-2",children:(0,c.jsx)("span",{onClick:N?async()=>{try{L(!0);const e=await g.A.delete("/remove-from-favorites/".concat(V),{data:{restaurantName:A}});S(!1),201===e.status&&x.oR.success((0,c.jsx)("div",{style:{direction:"rtl"},children:"\u062a\u0645 \u062d\u0630\u0641 \u0627\u0644\u0645\u062a\u062c\u0631 \u0645\u0646 \u0627\u0644\u0645\u0641\u0636\u0644\u0629"}))}catch(e){console.error("Error removing restaurant from favorites:",e),x.oR.error("Failed to remove restaurant from favorites")}finally{L(!1)}}:async()=>{try{C(!0);const e=await g.A.post("/add-to-favorites/".concat(V),{restaurantName:A});S(!0),201===e.status&&x.oR.success((0,c.jsx)("div",{style:{direction:"rtl"},children:"\u062a\u0645\u0651 \u0627\u0636\u0627\u0641\u0629 \u0627\u0644\u0645\u062a\u062c\u0631 \u0627\u0644\u0649 \u0627\u0644\u0645\u0641\u0636\u0644\u0629"}))}catch(e){console.error("Error adding restaurant to favorites:",e),x.oR.error("Failed to add restaurant to favorites")}finally{C(!1)}},className:"cursor-pointer",children:N?(0,c.jsx)(r.A,{className:"text-red-500"}):(0,c.jsx)(o.A,{className:"text-gray-500"})})})}),!T&&!X&&(0,c.jsx)(c.Fragment,{children:z&&(0,c.jsx)("div",{className:"absolute top-2 left-2",children:(0,c.jsx)("img",{src:v,alt:"Discount"})})}),(X||T)&&(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("div",{className:"absolute top-2 right-2",children:(0,c.jsx)(y.A,{onClick:()=>(async e=>{try{x.oR.info("Updating Delivery Availability"),200===(await g.A.put("/update-available-options/".concat(A),{availableOptions:{...j,delivery:e}})).status&&(x.oR.success("Delivery availability updated successfully"),window.location.reload())}catch(t){console.error("Error updating delivery availability:",t),x.oR.error("Failed to update delivery availability")}})(!j.delivery),className:"cursor-pointer",sx:{bgcolor:"white",width:32,height:32},children:j.delivery?(0,c.jsx)(i,{sx:{color:"green"}}):(0,c.jsx)(l,{sx:{color:"red"}})})}),(0,c.jsx)("div",{className:"absolute top-12 right-2",children:(0,c.jsx)(y.A,{onClick:()=>(async e=>{try{x.oR.info("Updating Dine-in Availability"),200===(await g.A.put("/update-available-options/".concat(A),{availableOptions:{...j,"dine-in":e}})).status&&(x.oR.success("Dine-in availability updated successfully"),window.location.reload())}catch(t){console.error("Error updating dine-in availability:",t),x.oR.error("Failed to update dine-in availability")}})(!j["dine-in"]),className:"cursor-pointer",sx:{bgcolor:"white",width:32,height:32},children:j["dine-in"]?(0,c.jsx)(d,{sx:{color:"green"}}):(0,c.jsx)(u,{sx:{color:"red"}})})})]})]}),(0,c.jsxs)("div",{className:"flex flex-col justify-start items-center p-4",children:[(0,c.jsx)("div",{className:"uppercase tracking-wide text-sm text-indigo-500 font-semibold mt-2",children:A}),(0,c.jsxs)("div",{className:"mt-2 mb-2 flex items-center text-sm font-bold text-gray-800",children:[(0,c.jsx)(h.g,{icon:m.Pcr,className:"mr-1"}),(0,c.jsx)("span",{children:w})]}),(0,c.jsx)(f,{status:n}),(0,c.jsxs)("div",{className:"flex flex-wrap items-center justify-center",children:[(0,c.jsx)("button",{className:"btn mt-2",onClick:E,children:"\u0639\u0631\u0636 \u0627\u0644\u0641\u0626\u0627\u062a"}),T&&(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("button",{className:"btn mt-2",onClick:B,children:"\u062a\u0639\u062f\u064a\u0644"}),(0,c.jsx)("button",{className:"btn mt-2",onClick:async()=>{if(window.confirm("Are you sure you want to delete this restaurant?"))try{await g.A.delete("/delete-restaurant/".concat(A)),x.oR.success("Restaurant deleted successfully"),window.location.reload()}catch(e){console.error("Error deleting restaurant:",e),x.oR.error("Failed to delete restaurant")}else console.log("Deletion canceled.")},children:"\u062d\u0630\u0641"}),(0,c.jsx)("button",{className:"mt-2 bg-green-500 hover:bg-green-700 text-white font-bold py-2 w-full rounded",onClick:()=>D("open"),children:"\u0645\u0641\u062a\u0648\u062d"}),(0,c.jsx)("button",{className:"mt-2 bg-orange-500 hover:bg-orange-700 text-white font-bold py-2 w-full rounded",onClick:()=>D("busy"),children:"\u0645\u0634\u063a\u0648\u0644"}),(0,c.jsx)("button",{className:"mt-2 bg-red-500 hover:bg-red-700 text-white font-bold py-2 w-full rounded",onClick:()=>D("closed"),children:"\u0645\u063a\u0644\u0642"}),(0,c.jsx)("button",{className:"btn mt-2",onClick:M,children:"\u062a\u062d\u062f\u064a\u062b \u0633\u0627\u0639\u0627\u062a \u0627\u0644\u0639\u0645\u0644"})]}),X&&(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("button",{className:"btn mt-2",onClick:B,children:"\u062a\u0639\u062f\u064a\u0644"}),(0,c.jsx)("button",{className:"mt-2  bg-green-500 hover:bg-green-700 text-white font-bold py-2 w-full rounded",onClick:()=>D("open"),children:"\u0645\u0641\u062a\u0648\u062d"}),(0,c.jsx)("button",{className:"mt-2 bg-orange-500 hover:bg-orange-700 text-white font-bold py-2 w-full rounded",onClick:()=>D("busy"),children:"\u0645\u0634\u063a\u0648\u0644"}),(0,c.jsx)("button",{className:"mt-2 bg-red-500 hover:bg-red-700 text-white font-bold py-2 w-full rounded",onClick:()=>D("closed"),children:"\u0645\u063a\u0644\u0642"}),(0,c.jsx)("button",{className:"btn mt-2",onClick:M,children:"\u062a\u062d\u062f\u064a\u062b \u0633\u0627\u0639\u0627\u062a \u0627\u0644\u0639\u0645\u0644"})]})]})]})]})})}}}]);
//# sourceMappingURL=74.a9a7f382.chunk.js.map